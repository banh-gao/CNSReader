<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.6.0_27) on Tue Dec 17 16:01:28 CET 2013 -->
<title>AutCardService</title>
<meta name="date" content="2013-12-17">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AutCardService";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>PREV CLASS</li>
<li><a href="../../../opencard/opt/security/CHVCardService.html" title="interface in opencard.opt.security"><span class="strong">NEXT CLASS</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?opencard/opt/security/AutCardService.html" target="_top">FRAMES</a></li>
<li><a href="AutCardService.html" target="_top">NO FRAMES</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>SUMMARY:&nbsp;</li>
<li>NESTED&nbsp;|&nbsp;</li>
<li>FIELD&nbsp;|&nbsp;</li>
<li>CONSTR&nbsp;|&nbsp;</li>
<li><a href="#method_summary">METHOD</a></li>
</ul>
<ul class="subNavList">
<li>DETAIL:&nbsp;</li>
<li>FIELD&nbsp;|&nbsp;</li>
<li>CONSTR&nbsp;|&nbsp;</li>
<li><a href="#method_detail">METHOD</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<p class="subTitle">opencard.opt.security</p>
<h2 title="Interface AutCardService" class="title">Interface AutCardService</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../opencard/opt/service/CardServiceInterface.html" title="interface in opencard.opt.service">CardServiceInterface</a></dd>
</dl>
<hr>
<br>
<pre>public interface <strong>AutCardService</strong>
extends <a href="../../../opencard/opt/service/CardServiceInterface.html" title="interface in opencard.opt.service">CardServiceInterface</a></pre>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../opencard/opt/security/AutCardService.html#closeApplication(opencard.opt.security.SecurityDomain)">closeApplication</a></strong>(<a href="../../../opencard/opt/security/SecurityDomain.html" title="interface in opencard.opt.security">SecurityDomain</a>&nbsp;domain)</code>
<div class="block">Resets the achieved external authentications on the smartcard.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../opencard/opt/security/AutCardService.html#externalAuthenticate(opencard.opt.security.KeyRef, opencard.opt.security.SignCredential)">externalAuthenticate</a></strong>(<a href="../../../opencard/opt/security/KeyRef.html" title="interface in opencard.opt.security">KeyRef</a>&nbsp;keyref,
                    <a href="../../../opencard/opt/security/SignCredential.html" title="interface in opencard.opt.security">SignCredential</a>&nbsp;credential)</code>
<div class="block">Performs an external authentication against the smartcard.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../opencard/opt/security/AutCardService.html#getChallengeLength(opencard.opt.security.KeyRef)">getChallengeLength</a></strong>(<a href="../../../opencard/opt/security/KeyRef.html" title="interface in opencard.opt.security">KeyRef</a>&nbsp;key)</code>
<div class="block">Determines the required length of a challenge for internal authentication.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../opencard/opt/security/AutCardService.html#internalAuthenticate(opencard.opt.security.KeyRef, byte[])">internalAuthenticate</a></strong>(<a href="../../../opencard/opt/security/KeyRef.html" title="interface in opencard.opt.security">KeyRef</a>&nbsp;keyref,
                    byte[]&nbsp;challenge)</code>
<div class="block">Requests an internal authentication from the smartcard.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_opencard.opt.service.CardServiceInterface">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;opencard.opt.service.<a href="../../../opencard/opt/service/CardServiceInterface.html" title="interface in opencard.opt.service">CardServiceInterface</a></h3>
<code><a href="../../../opencard/opt/service/CardServiceInterface.html#getCard()">getCard</a>, <a href="../../../opencard/opt/service/CardServiceInterface.html#setCHVDialog(opencard.core.service.CHVDialog)">setCHVDialog</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getChallengeLength(opencard.opt.security.KeyRef)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getChallengeLength</h4>
<pre>int&nbsp;getChallengeLength(<a href="../../../opencard/opt/security/KeyRef.html" title="interface in opencard.opt.security">KeyRef</a>&nbsp;key)
                       throws <a href="../../../opencard/core/service/CardServiceException.html" title="class in opencard.core.service">CardServiceException</a>,
                              <a href="../../../opencard/core/terminal/CardTerminalException.html" title="class in opencard.core.terminal">CardTerminalException</a></pre>
<div class="block">Determines the required length of a challenge for internal authentication.
 The terminal or host application can then prepare a random challenge of
 the given length to invoke <tt>internalAuthenticate</tt>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - a reference identifying the key to be used for
                    internal authentication in a subsequent invocation</dd>
<dt><span class="strong">Returns:</span></dt><dd>the number of bytes in an appropriate random challenge.
            The card may be able to deal with other sizes of random
            challenges. For example, if a public key algorithm is
            used, the card may be able to pad shorter challenges to
            the required block length. The value returned here could
            the be the maximum length that a random challenge may have.
            For secret key algorithms, the value returned typically
            is the block size, and no other sizes are acceptable.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../opencard/core/service/CardServiceException.html" title="class in opencard.core.service">CardServiceException</a></code> - if this service encountered an error.
            This may occur if the service needs to contact the smartcard
            in order to determine the challenge length. An exception may
            also be thrown if the service is unable to locate the security
            domain.</dd>
<dd><code><a href="../../../opencard/core/terminal/CardTerminalException.html" title="class in opencard.core.terminal">CardTerminalException</a></code> - if the underlying card terminal encountered an error
            when communicating with the smartcard</dd></dl>
</li>
</ul>
<a name="internalAuthenticate(opencard.opt.security.KeyRef, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>internalAuthenticate</h4>
<pre>byte[]&nbsp;internalAuthenticate(<a href="../../../opencard/opt/security/KeyRef.html" title="interface in opencard.opt.security">KeyRef</a>&nbsp;keyref,
                          byte[]&nbsp;challenge)
                            throws <a href="../../../opencard/core/service/CardServiceException.html" title="class in opencard.core.service">CardServiceException</a>,
                                   <a href="../../../opencard/core/terminal/CardTerminalException.html" title="class in opencard.core.terminal">CardTerminalException</a></pre>
<div class="block">Requests an internal authentication from the smartcard.
 The smartcard will take the random challenge passed as argument,
 perform some operations involving a secret, and return the result
 of these operations. The terminal or host application can then
 check the result to verify that the secret used by the card is
 the expected one, thereby authenticating the card.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>keyref</code> - a reference identifying the key to be used for
                    internal authentication</dd><dd><code>challenge</code> - the random challenge to be used by the smartcard</dd>
<dt><span class="strong">Returns:</span></dt><dd>a byte array holding the result of the smartcard's operations.
            It is up to the application to verify that this result is the
            expected one. (You wouldn't want to trust a smartcard just
            because this method returned <tt>true</tt>, would you?)</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../opencard/core/service/CardServiceException.html" title="class in opencard.core.service">CardServiceException</a></code> - if this service encountered an error</dd>
<dd><code><a href="../../../opencard/core/terminal/CardTerminalException.html" title="class in opencard.core.terminal">CardTerminalException</a></code> - if the underlying card terminal encountered an error
            when communicating with the smartcard</dd></dl>
</li>
</ul>
<a name="externalAuthenticate(opencard.opt.security.KeyRef, opencard.opt.security.SignCredential)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>externalAuthenticate</h4>
<pre>boolean&nbsp;externalAuthenticate(<a href="../../../opencard/opt/security/KeyRef.html" title="interface in opencard.opt.security">KeyRef</a>&nbsp;keyref,
                           <a href="../../../opencard/opt/security/SignCredential.html" title="interface in opencard.opt.security">SignCredential</a>&nbsp;credential)
                             throws <a href="../../../opencard/core/service/CardServiceException.html" title="class in opencard.core.service">CardServiceException</a>,
                                    <a href="../../../opencard/core/terminal/CardTerminalException.html" title="class in opencard.core.terminal">CardTerminalException</a></pre>
<div class="block">Performs an external authentication against the smartcard.
 The smartcard will provide a random challenge, which is signed
 using the credential passed as an argument. The result of this
 operation is sent back to the smartcard and verified there.
 If the credential provided by the terminal or host application
 is the one expected by the smartcard, the external authentication
 succeeds. Otherwise, it fails. Note that repeated failed attempts
 to authenticate may cause the smartcard to permanently block the
 key that is used to check the authentication.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>keyref</code> - a reference identifying the key to be used for
                    external authentication</dd><dd><code>credential</code> - the secret to be used to authenticate the application
                    against the smartcard. The secret will be used only
                    once, and before this method returns. The application
                    may take actions to ensure that the secret cannot be
                    used arbitrarily often, or after this method returned.</dd>
<dt><span class="strong">Returns:</span></dt><dd><tt>true</tt> if the smartcard accepted the credential and
            therefore considers the outside world to be authenticated,
            <tt>false</tt> if the smartcard rejected to authenticate
            the outside world.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../opencard/core/service/CardServiceException.html" title="class in opencard.core.service">CardServiceException</a></code> - if this service encountered an error. In this context, it
            is not considered an error if the smartcard rejected the
            authentication. However, an exception will be thrown if the
            referred key on the smartcard is blocked so that authentication
            using this key becomes impossible.</dd>
<dd><code><a href="../../../opencard/core/terminal/CardTerminalException.html" title="class in opencard.core.terminal">CardTerminalException</a></code> - if the underlying card terminal encountered an error
            when communicating with the smartcard</dd></dl>
</li>
</ul>
<a name="closeApplication(opencard.opt.security.SecurityDomain)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>closeApplication</h4>
<pre>void&nbsp;closeApplication(<a href="../../../opencard/opt/security/SecurityDomain.html" title="interface in opencard.opt.security">SecurityDomain</a>&nbsp;domain)
                      throws <a href="../../../opencard/core/service/CardServiceException.html" title="class in opencard.core.service">CardServiceException</a>,
                             <a href="../../../opencard/core/terminal/CardTerminalException.html" title="class in opencard.core.terminal">CardTerminalException</a></pre>
<div class="block">Resets the achieved external authentications on the smartcard.
 Typically, other permanent access conditions that have been satisfied
 will also be reset. If the card does not allow to reset access
 conditions for a specific application, it is expected that <i>all</i>
 access conditions for all on-card applications are reset.

 <p>
 The name of this method implies that an application on the smartcard
 is first selected and then <i>opened</i> by performing external
 authentication, giving access to the application data. By resetting the
 external authentication, the on-card application therefore gets
 <tt>closed</tt>.

 <p>
 External authentication as well as Card Holder Verification (CHV) can
 be required to satisfy access conditions that are imposed by the card.
 The operation expected to be performed when invoking this method is to
 reset the state in the smartcard so that these access conditions are no
 longer satisfied. This avoids that another terminal or host application
 accesses the smartcard's data without proving it's authorization first.
 The signature of the method here is the same as in the interface
 <tt>CHVCardService</tt>, since both are expected to do the same thing.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>domain</code> - the security domain for which to reset external
                    authentications</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../opencard/core/service/CardServiceException.html" title="class in opencard.core.service">CardServiceException</a></code> - if this service, or the underlying implementation,
            encountered an error</dd>
<dd><code><a href="../../../opencard/core/terminal/CardTerminalException.html" title="class in opencard.core.terminal">CardTerminalException</a></code> - if the underlying terminal encountered an error while
            communicating with the smartcard</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../opencard/opt/security/CHVCardService.html#closeApplication(opencard.opt.security.SecurityDomain)"><code>CHVCardService.closeApplication(opencard.opt.security.SecurityDomain)</code></a></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>PREV CLASS</li>
<li><a href="../../../opencard/opt/security/CHVCardService.html" title="interface in opencard.opt.security"><span class="strong">NEXT CLASS</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?opencard/opt/security/AutCardService.html" target="_top">FRAMES</a></li>
<li><a href="AutCardService.html" target="_top">NO FRAMES</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>SUMMARY:&nbsp;</li>
<li>NESTED&nbsp;|&nbsp;</li>
<li>FIELD&nbsp;|&nbsp;</li>
<li>CONSTR&nbsp;|&nbsp;</li>
<li><a href="#method_summary">METHOD</a></li>
</ul>
<ul class="subNavList">
<li>DETAIL:&nbsp;</li>
<li>FIELD&nbsp;|&nbsp;</li>
<li>CONSTR&nbsp;|&nbsp;</li>
<li><a href="#method_detail">METHOD</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
